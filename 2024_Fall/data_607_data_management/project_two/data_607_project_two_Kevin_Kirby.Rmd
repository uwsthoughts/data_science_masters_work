---
title: 'DATA 607, Project Two: Data Transformation - All Together'
author: "Kevin Kirby"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Overview


```{file-imports}
library(dplyr)
library(ggplot2)
library(tidyverse)
library(readr)


movie_data_al <- read_lines("https://storage.googleapis.com/data_science_masters_files/2024_fall/data_607_data_management/project_two/movies.csv")

laptop_data_tf <- read.csv("https://storage.googleapis.com/data_science_masters_files/2024_fall/data_607_data_management/project_two/laptopData.csv")

world_population_nom <- read.csv("https://storage.googleapis.com/data_science_masters_files/2024_fall/data_607_data_management/project_two/world_population.csv")

```




### Tidying and reviewing laptop data

#### Tidying the data




## Tidying and reviewing world population data

This is based on the world population dataset posted on the week 5 discussion board by NOM. I've reorganized it a better and made it more human readable. Overall, a very cool dataset!

### Tidying the data

The main thing was dropping off columns I didn't need, like country column or separate rank column. I remapped ranking to match row number. I'm not a fan of the dot syntax for field names within tables because it can get tricky to separate out moving between versus within a table.

```{r tidy-world}

tidy_world_data <- world_population_nom
tidy_world_data <- tidy_world_data[order(tidy_world_data$Rank), ]

tidy_world_data$Rank <- NULL
tidy_world_data$CCA3 <- NULL

tidy_world_data <- tidy_world_data %>%
  rename(
    country_territory = Country.Territory,
    capital = Capital,
    continent = Continent,
    pop_2022 = X2022.Population,
    pop_2020 = X2020.Population,
    pop_2015 = X2015.Population,
    pop_2010 = X2010.Population,
    pop_2000 = X2000.Population,
    pop_1990 = X1990.Population,
    pop_1980 = X1980.Population,
    pop_1970 = X1970.Population,
    area_km = Area..km..,
    density_per_km = Density..per.km..,
    growth_rate = Growth.Rate,
    world_pop_percentage = World.Population.Percentage
  )

rownames(tidy_world_data) <- NULL

```



### World population analysis

The first chart shows overall population growth in Morocco between 1970 and 2022. The second chart shows a log 10 relationship between population density and and then growth rate. In general I was looking for initial evidence showing that a country experiencing increased density is more likely to experience population growth.

```{r world-pop-analysis}

country_data <- subset(tidy_world_data, country_territory == "Morocco")
years <- c(1970, 1980, 1990, 2000, 2010, 2015, 2020, 2022)
population_values <- as.numeric(country_data[1, c("pop_1970", "pop_1980", "pop_1990", "pop_2000", "pop_2010", "pop_2015", "pop_2020", "pop_2022")])

population_trend <- data.frame(year = years, population = population_values)

ggplot(population_trend, aes(x = year, y = population)) +
  geom_line() +
  geom_point() +
  ggtitle(paste("Population Trend for", country_name)) +
  xlab("Year") +
  ylab("Population") +
  scale_y_continuous(labels = scales::comma) + 
  theme_minimal()

ggplot(tidy_world_data, aes(x = density_per_km, y = growth_rate)) +
  geom_point(alpha = 0.6) +
  ggtitle("Log Relationship Between Population Density and Growth Rate") +
  xlab("Per Square KM Population Density") +
  ylab("Growth Rate") +
  theme_minimal() +
  scale_x_log10() 

```

